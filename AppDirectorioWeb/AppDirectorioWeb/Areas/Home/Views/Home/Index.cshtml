@using DataAccess.Repository.IRepository;
@inject IUnitOfWork _unitOfWork;
@model Models.ViewModels.LookForBusinessViewModel;
@{
    ViewData["Title"] = "Home Page";
}

@*seccion de busqueda temporalmente inhabilitada hasta que tengamos buena cantidad de negocios*@
<!--<section class="banner" style="        background-image: url(../img/background/tiendas_comercio_ventas_1.png);">
    <div class="container">
        <div class="row text-center align-items-center justify-content-center" style="height:440px;">
            <div class="col-12">-->
                <!-- Banner Info -->
                <!--<div class="banner-info">
                    <h1 class="text-uppercase text-white mb-4">
                        Explora. Descubre. Comparte
                    </h1>
                    <p class="lead text-white">
                        Encuentra negocios locales
                    </p>
                </div>-->

                <!-- Search Box -->
                <!--<div class="search-box-2">
                    <form class="row g-2 justify-content-center" asp-area="Negocios" asp-controller="Negocios" asp-action="LookForBusiness" method="POST">

                        <div class="form-group col-md-5 col-lg-4 mb-0">
                            <div class="input-group mb-2">
                                <div class="input-group-text">Buscar</div>
                                <input asp-for="Search" type="text" class="form-control" placeholder="Qué estas buscando?">
                            </div>
                        </div>

                        <div class="form-group prepend-append col-md-5 col-lg-4 mb-0">
                            <div class="input-group mb-2">
                                <div class="input-group-text">Cerca de</div>
                                @Html.DropDownListFor(m => m.IdDepartamento, Model.Departamentos, "- SELECCIONA UN DEPARTAMENTO -", new { @class = "form-control" })
                            </div>
                        </div>

                        <div class="form-group col-md-3 col-lg-2 mb-0">
                            <button type="submit" class="btn btn-primary w-100">
                                Buscar
                                <i class="fas fa-search" aria-hidden="true"></i>
                            </button>
                        </div>
                        <input type="hidden" id="lonF" />
                        <input type="hidden" id="latF" />
                    </form>
                </div>
            </div>
        </div>
    </div>

</section>-->
<section class="pt-md-10 sec-pb-70 pt-8 pb-6 bg-light">
    <div class="container">
        <div class="section-title">
            <h2>Qué te interesa encontrar?</h2>
            <p>Explora y conecta con negocios locales</p>
        </div>
        <div class="row">
            @if (_unitOfWork.Category.GetCatUsedByBusiness().Count() > 0)
            {
                <div class="col-md-4 col-lg-3 col-xs-12">
                    <a class="card py-5 hover-bg-primary bg-transparent" asp-area="Negocios" asp-controller="Negocios" asp-action="LookForBusinessByAllCategory">
                        <div class="card-body text-center">
                            @*<div class="icon-md">
                            <i class="icon-listy icon-more"></i>
                        </div>*@
                            <span class="h5">Ver todo</span>
                        </div>
                    </a>
                </div>
                @foreach (var item in _unitOfWork.Category.GetCatUsedByBusiness().ToList())
                {
                    <div class="col-md-4 col-lg-3 col-xs-12">
                        <a class="card py-5 hover-bg-primary bg-transparent" asp-area="Negocios" asp-controller="Negocios" asp-route-categoryId="@item.Id" asp-action="LookForBusinessByCategory">
                            <div class="card-body text-center">
                                <span class="h5">@item.Nombre</span>
                            </div>
                        </a>
                    </div>
                }



            }
            else
            {
                <div class="col-md-4 col-lg-3 col-xs-12">
                    <a class="card py-5 hover-bg-primary bg-transparent" href="#">
                        <div class="card-body text-center">
                            @*<div class="icon-md">
                            <i class="icon-listy icon-more"></i>
                        </div>*@
                            <span class="h5">Por el momento no hay negocios registrados</span>
                        </div>
                    </a>
                </div>
            }


        </div>
    </div>
</section>
